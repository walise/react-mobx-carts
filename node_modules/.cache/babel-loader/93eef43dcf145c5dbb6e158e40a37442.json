{"ast":null,"code":"import _initializerDefineProperty from \"/Users/xyhua/Desktop/projects/react-mobx-carts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _applyDecoratedDescriptor from \"/Users/xyhua/Desktop/projects/react-mobx-carts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"/Users/xyhua/Desktop/projects/react-mobx-carts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper\";\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _class, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8;\n\nimport { observable, computed, action, makeObservable, autorun } from 'mobx';\nlet appleStore = (_dec = action.bound, _dec2 = action.bound, _dec3 = action.bound, _dec4 = action.bound, _dec5 = action.bound, _dec6 = action.bound, (_class = class appleStore {\n  constructor() {\n    _initializerDefineProperty(this, \"apples\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"isPick\", _descriptor2, this);\n\n    _initializerDefineProperty(this, \"setApples\", _descriptor3, this);\n\n    _initializerDefineProperty(this, \"getApples\", _descriptor4, this);\n\n    _initializerDefineProperty(this, \"clearApples\", _descriptor5, this);\n\n    _initializerDefineProperty(this, \"addApple\", _descriptor6, this);\n\n    _initializerDefineProperty(this, \"insertApple\", _descriptor7, this);\n\n    _initializerDefineProperty(this, \"eatApple\", _descriptor8, this);\n\n    makeObservable(this);\n  }\n\n  // 获取苹果的总计\n  get options() {\n    let options = {\n      // 当前摘掉\n      curCount: {\n        count: 0,\n        weight: 0\n      },\n      // 已吃掉\n      eatCount: {\n        count: 0,\n        weight: 0\n      }\n    };\n    this.getApples(); // 判断苹果是否已被吃掉\n\n    if (this.apples) {\n      this.apples.forEach(apple => {\n        let selector = apple.isEaten ? 'eatCount' : 'curCount';\n        options[selector].count++;\n        options[selector].weight += apple.weight;\n      });\n    }\n\n    return options;\n  }\n\n}, (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"apples\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return [];\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"isPick\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return false;\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"setApples\", [_dec], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return data => {\n      window.localStorage.setItem('apples', JSON.stringify(data ? data : this.apples));\n    };\n  }\n}), _descriptor4 = _applyDecoratedDescriptor(_class.prototype, \"getApples\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return () => {\n      this.apples = JSON.parse(window.localStorage.getItem('apples'));\n    };\n  }\n}), _descriptor5 = _applyDecoratedDescriptor(_class.prototype, \"clearApples\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return () => {\n      this.apples = [];\n      this.setApples();\n    };\n  }\n}), _descriptor6 = _applyDecoratedDescriptor(_class.prototype, \"addApple\", [_dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return data => {\n      this.apples.push(data);\n    };\n  }\n}), _descriptor7 = _applyDecoratedDescriptor(_class.prototype, \"insertApple\", [_dec5], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return () => {\n      if (this.isPick) {\n        this.isPick = false;\n      } else {\n        this.isPick = true;\n      }\n\n      this.apples.push({\n        id: this.apples.length + 1,\n        weight: Math.floor(Math.random() * (250 - 200 + 1) + 200),\n        isEaten: false\n      });\n      this.setApples();\n      this.getApples();\n    };\n  }\n}), _descriptor8 = _applyDecoratedDescriptor(_class.prototype, \"eatApple\", [_dec6], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return id => {\n      this.apples.map(apple => {\n        if (apple.id === id) {\n          apple.isEaten = true;\n        }\n      });\n    };\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"options\", [computed], Object.getOwnPropertyDescriptor(_class.prototype, \"options\"), _class.prototype)), _class));\nexport default new appleStore();","map":{"version":3,"sources":["/Users/xyhua/Desktop/projects/react-mobx-carts/src/mobx/index.js"],"names":["observable","computed","action","makeObservable","autorun","appleStore","bound","constructor","options","curCount","count","weight","eatCount","getApples","apples","forEach","apple","selector","isEaten","data","window","localStorage","setItem","JSON","stringify","parse","getItem","setApples","push","isPick","id","length","Math","floor","random","map"],"mappings":";;;;;;AAAA,SAASA,UAAT,EAAqBC,QAArB,EAA+BC,MAA/B,EAAuCC,cAAvC,EAAuDC,OAAvD,QAAqE,MAArE;IACMC,U,WAQDH,MAAM,CAACI,K,UAIPJ,MAAM,CAACI,K,UAIPJ,MAAM,CAACI,K,UAIPJ,MAAM,CAACI,K,UAIPJ,MAAM,CAACI,K,UAePJ,MAAM,CAACI,K,YAvCZ,MAAMD,UAAN,CAAiB;AACbE,EAAAA,WAAW,GAAE;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AACTJ,IAAAA,cAAc,CAAC,IAAD,CAAd;AACH;;AA2CD;AAEe,MAAPK,OAAO,GAAG;AACd,QAAIA,OAAO,GAAG;AACV;AACAC,MAAAA,QAAQ,EAAE;AACNC,QAAAA,KAAK,EAAE,CADD;AAENC,QAAAA,MAAM,EAAE;AAFF,OAFA;AAMV;AACAC,MAAAA,QAAQ,EAAE;AACNF,QAAAA,KAAK,EAAE,CADD;AAENC,QAAAA,MAAM,EAAE;AAFF;AAPA,KAAd;AAYA,SAAKE,SAAL,GAbc,CAcd;;AACA,QAAG,KAAKC,MAAR,EAAe;AACX,WAAKA,MAAL,CAAYC,OAAZ,CAAoBC,KAAK,IAAI;AACzB,YAAIC,QAAQ,GAAGD,KAAK,CAACE,OAAN,GAAgB,UAAhB,GAA2B,UAA1C;AACAV,QAAAA,OAAO,CAACS,QAAD,CAAP,CAAkBP,KAAlB;AACAF,QAAAA,OAAO,CAACS,QAAD,CAAP,CAAkBN,MAAlB,IAA4BK,KAAK,CAACL,MAAlC;AACH,OAJD;AAKH;;AACD,WAAOH,OAAP;AACH;;AAvEY,C,wEAIZR,U;;;;;WAAoB,E;;0EAEpBA,U;;;;;WAAoB,K;;;;;;;WAEImB,IAAD,IAAQ;AAC5BC,MAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,QAA5B,EAAqCC,IAAI,CAACC,SAAL,CAAeL,IAAI,GAACA,IAAD,GAAM,KAAKL,MAA9B,CAArC;AACH,K;;;;;;;WAEuB,MAAI;AACxB,WAAKA,MAAL,GAAcS,IAAI,CAACE,KAAL,CAAWL,MAAM,CAACC,YAAP,CAAoBK,OAApB,CAA4B,QAA5B,CAAX,CAAd;AACH,K;;;;;;;WAEyB,MAAI;AAC1B,WAAKZ,MAAL,GAAc,EAAd;AACA,WAAKa,SAAL;AACH,K;;;;;;;WACuBR,IAAD,IAAQ;AAC3B,WAAKL,MAAL,CAAYc,IAAZ,CAAiBT,IAAjB;AACH,K;;;;;;;WAEyB,MAAI;AAC1B,UAAG,KAAKU,MAAR,EAAe;AACX,aAAKA,MAAL,GAAc,KAAd;AACH,OAFD,MAEK;AACD,aAAKA,MAAL,GAAc,IAAd;AACH;;AACD,WAAKf,MAAL,CAAYc,IAAZ,CAAiB;AACfE,QAAAA,EAAE,EAAG,KAAKhB,MAAL,CAAYiB,MAAZ,GAAmB,CADT;AAEfpB,QAAAA,MAAM,EAAEqB,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,MAAiB,MAAM,GAAN,GAAY,CAA7B,IAAkC,GAA7C,CAFO;AAGfhB,QAAAA,OAAO,EAAE;AAHM,OAAjB;AAKA,WAAKS,SAAL;AACA,WAAKd,SAAL;AACH,K;;;;;;;WAEuBiB,EAAD,IAAM;AACzB,WAAKhB,MAAL,CAAYqB,GAAZ,CAAiBnB,KAAD,IAAS;AACrB,YAAGA,KAAK,CAACc,EAAN,KAAaA,EAAhB,EAAmB;AACfd,UAAAA,KAAK,CAACE,OAAN,GAAgB,IAAhB;AACH;AACJ,OAJD;AAKH,K;;4DAEAjB,Q;AA0BL,eAAe,IAAII,UAAJ,EAAf","sourcesContent":["import { observable, computed, action, makeObservable, autorun} from 'mobx';\nclass appleStore {\n    constructor(){\n        makeObservable(this)\n    }\n    @observable apples = [];\n    // 摘果子 状态 控制按钮显示\n    @observable isPick = false\n    // 缓存添加的数据\n    @action.bound setApples=(data)=>{\n        window.localStorage.setItem('apples',JSON.stringify(data?data:this.apples))\n    }\n    // 获取缓存数据\n    @action.bound getApples=()=>{\n        this.apples = JSON.parse(window.localStorage.getItem('apples'))\n    }\n    // 清空数据\n    @action.bound clearApples=()=>{\n        this.apples = []\n        this.setApples()\n    }\n    @action.bound addApple=(data)=>{\n        this.apples.push(data)\n    }\n    // 摘苹果\n    @action.bound insertApple=()=>{\n        if(this.isPick){\n            this.isPick = false\n        }else{\n            this.isPick = true\n        }\n        this.apples.push({\n          id: (this.apples.length+1),\n          weight: Math.floor(Math.random() * (250 - 200 + 1) + 200),\n          isEaten: false\n        })\n        this.setApples()\n        this.getApples()\n    }\n    // 吃苹果\n    @action.bound eatApple=(id)=>{\n        this.apples.map((apple)=>{\n            if(apple.id === id){\n                apple.isEaten = true\n            }\n        })\n    }\n    // 获取苹果的总计\n    @computed \n        get options() {\n        let options = {\n            // 当前摘掉\n            curCount: {\n                count: 0,\n                weight: 0\n            },\n            // 已吃掉\n            eatCount: {\n                count: 0,\n                weight: 0\n            }\n        }\n        this.getApples()\n        // 判断苹果是否已被吃掉\n        if(this.apples){\n            this.apples.forEach(apple => {\n                let selector = apple.isEaten ? 'eatCount':'curCount';\n                options[selector].count ++;\n                options[selector].weight += apple.weight;\n            });\n        }\n        return options\n    }\n}\nexport default new appleStore()"]},"metadata":{},"sourceType":"module"}