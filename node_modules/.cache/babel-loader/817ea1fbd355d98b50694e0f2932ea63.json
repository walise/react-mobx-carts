{"ast":null,"code":"import _initializerDefineProperty from \"/Users/xyhua/Desktop/projects/react-mobx-carts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _applyDecoratedDescriptor from \"/Users/xyhua/Desktop/projects/react-mobx-carts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"/Users/xyhua/Desktop/projects/react-mobx-carts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper\";\n\nvar _dec, _dec2, _dec3, _dec4, _class, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6;\n\nimport { observable, computed, action, makeObservable } from 'mobx';\nlet appleStore = (_dec = action.bound, _dec2 = action.bound, _dec3 = action.bound, _dec4 = action.bound, (_class = class appleStore {\n  constructor() {\n    _initializerDefineProperty(this, \"apples\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"isPick\", _descriptor2, this);\n\n    _initializerDefineProperty(this, \"setApples\", _descriptor3, this);\n\n    _initializerDefineProperty(this, \"getApples\", _descriptor4, this);\n\n    _initializerDefineProperty(this, \"clearApples\", _descriptor5, this);\n\n    _initializerDefineProperty(this, \"addApple\", _descriptor6, this);\n\n    makeObservable(this);\n  }\n\n  // 获取苹果的总计\n  get Total() {\n    let options = {\n      // 当前摘掉\n      curCount: {\n        count: 0,\n        weight: 0\n      },\n      // 已吃掉\n      eatCount: {\n        count: 0,\n        weight: 0\n      }\n    };\n    this.getApples(); // 判断苹果是否已被吃掉\n\n    if (this.apples) {\n      this.apples.forEach(apple => {\n        let selector = apple.isEaten ? 'eatCount' : 'curCount';\n        options[selector].count++;\n        options[selector].weight += apple.weight;\n      });\n    }\n\n    return options;\n  }\n\n}, (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"apples\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return [];\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"isPick\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return true;\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"setApples\", [_dec], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return data => {\n      window.localStorage.setItem('apples', JSON.stringify(data ? data : this.apples));\n    };\n  }\n}), _descriptor4 = _applyDecoratedDescriptor(_class.prototype, \"getApples\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return () => {\n      this.apples = JSON.parse(window.localStorage.getItem('apples'));\n    };\n  }\n}), _descriptor5 = _applyDecoratedDescriptor(_class.prototype, \"clearApples\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return () => {\n      this.apples = [];\n      this.setApples();\n    };\n  }\n}), _descriptor6 = _applyDecoratedDescriptor(_class.prototype, \"addApple\", [_dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return data => {\n      this.apples.push(data);\n    };\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"Total\", [computed], Object.getOwnPropertyDescriptor(_class.prototype, \"Total\"), _class.prototype)), _class));\nexport default new appleStore();","map":{"version":3,"sources":["/Users/xyhua/Desktop/projects/react-mobx-carts/src/mobx/index.jsx"],"names":["observable","computed","action","makeObservable","appleStore","bound","constructor","Total","options","curCount","count","weight","eatCount","getApples","apples","forEach","apple","selector","isEaten","data","window","localStorage","setItem","JSON","stringify","parse","getItem","setApples","push"],"mappings":";;;;;;AAAA,SAASA,UAAT,EAAqBC,QAArB,EAA+BC,MAA/B,EAAuCC,cAAvC,QAA4D,MAA5D;IACMC,U,WAQDF,MAAM,CAACG,K,UAIPH,MAAM,CAACG,K,UAIPH,MAAM,CAACG,K,UAIPH,MAAM,CAACG,K,YApBZ,MAAMD,UAAN,CAAiB;AACbE,EAAAA,WAAW,GAAE;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AACTH,IAAAA,cAAc,CAAC,IAAD,CAAd;AACH;;AAoBD;AAEa,MAALI,KAAK,GAAG;AACZ,QAAIC,OAAO,GAAG;AACV;AACAC,MAAAA,QAAQ,EAAE;AACNC,QAAAA,KAAK,EAAE,CADD;AAENC,QAAAA,MAAM,EAAE;AAFF,OAFA;AAMV;AACAC,MAAAA,QAAQ,EAAE;AACNF,QAAAA,KAAK,EAAE,CADD;AAENC,QAAAA,MAAM,EAAE;AAFF;AAPA,KAAd;AAYA,SAAKE,SAAL,GAbY,CAcZ;;AACA,QAAG,KAAKC,MAAR,EAAe;AACX,WAAKA,MAAL,CAAYC,OAAZ,CAAoBC,KAAK,IAAI;AACzB,YAAIC,QAAQ,GAAGD,KAAK,CAACE,OAAN,GAAgB,UAAhB,GAA2B,UAA1C;AACAV,QAAAA,OAAO,CAACS,QAAD,CAAP,CAAkBP,KAAlB;AACAF,QAAAA,OAAO,CAACS,QAAD,CAAP,CAAkBN,MAAlB,IAA4BK,KAAK,CAACL,MAAlC;AACH,OAJD;AAKH;;AACD,WAAOH,OAAP;AACH;;AAhDY,C,wEAIZR,U;;;;;WAAoB,E;;0EAEpBA,U;;;;;WAAoB,I;;;;;;;WAEImB,IAAD,IAAQ;AAC5BC,MAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,QAA5B,EAAqCC,IAAI,CAACC,SAAL,CAAeL,IAAI,GAACA,IAAD,GAAM,KAAKL,MAA9B,CAArC;AACH,K;;;;;;;WAEuB,MAAI;AACxB,WAAKA,MAAL,GAAcS,IAAI,CAACE,KAAL,CAAWL,MAAM,CAACC,YAAP,CAAoBK,OAApB,CAA4B,QAA5B,CAAX,CAAd;AACH,K;;;;;;;WAEyB,MAAI;AAC1B,WAAKZ,MAAL,GAAc,EAAd;AACA,WAAKa,SAAL;AACH,K;;;;;;;WACuBR,IAAD,IAAQ;AAC3B,WAAKL,MAAL,CAAYc,IAAZ,CAAiBT,IAAjB;AACH,K;;0DAEAlB,Q;AA0BL,eAAe,IAAIG,UAAJ,EAAf","sourcesContent":["import { observable, computed, action, makeObservable} from 'mobx';\nclass appleStore {\n    constructor(){\n        makeObservable(this)\n    }\n    @observable apples = [];\n    // 摘果子 状态 控制按钮显示\n    @observable isPick = true\n    // 缓存添加的数据\n    @action.bound setApples=(data)=>{\n        window.localStorage.setItem('apples',JSON.stringify(data?data:this.apples))\n    }\n    // 获取缓存数据\n    @action.bound getApples=()=>{\n        this.apples = JSON.parse(window.localStorage.getItem('apples'))\n    }\n    // 清空数据\n    @action.bound clearApples=()=>{\n        this.apples = []\n        this.setApples()\n    }\n    @action.bound addApple=(data)=>{\n        this.apples.push(data)\n    }\n    // 获取苹果的总计\n    @computed \n        get Total() {\n        let options = {\n            // 当前摘掉\n            curCount: {\n                count: 0,\n                weight: 0\n            },\n            // 已吃掉\n            eatCount: {\n                count: 0,\n                weight: 0\n            }\n        }\n        this.getApples()\n        // 判断苹果是否已被吃掉\n        if(this.apples){\n            this.apples.forEach(apple => {\n                let selector = apple.isEaten ? 'eatCount':'curCount';\n                options[selector].count ++;\n                options[selector].weight += apple.weight;\n            });\n        }\n        return options\n    }\n}\nexport default new appleStore()"]},"metadata":{},"sourceType":"module"}